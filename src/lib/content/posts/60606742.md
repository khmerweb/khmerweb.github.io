---
id: '60606742'
title: 'លុប​ទំព័រ​ស្តាទិក'
categories: 'Node.js, Astro'
thumb: ''
date: '2025-09-04T12:44:39'
bookTitle: 'Astro Dynamic Website'
bookThumb: ''
bookChapter: 'ទំព័រ​ស្តាទិក'
videos: ''
---
<p>ស្រដៀង​គ្នា​នឹង​ការលុប​ទំព័រ​ការផ្សាយ ការលុប​ទំព័រ​ស្តាទិក​ត្រូវ​ធ្វើ​ឡើង​នៅ​ក្នុង​ក្បួន​ចុង​ផ្លូវ​ឬ API Endpoint នៅ​ក្នុង​ថត ​src/pages/admin/page/delete ។ ឯកសារ​នៃ​ក្បួន​ចុង​ផ្លូវ​ឬ​ API Endpoint ​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ត្រូវមាន​ឈ្មោះ​ថា [id].js ដែល​ជា​ប៉ារ៉ាម៉ែត​មួយ​ចាំទទួល​យក​អត្តសញ្ញាណ​របស់​ទំព័រ​ស្តាទិក​ដែល​ត្រូវ​លុប​។ បាន​ន័យ​ថា​ផ្លូវ​សំរាប់​លុប​ឯកសារ​ស្តាទិក​ក៏​​ជា​ផ្លូវ​ឌីណាមិក​មួយ​ដែរ​។</p><p>&nbsp;</p><p>ដោយ​ហេតុថា ក្បួន​ចុង​ផ្លូវ​ឬ API Endpoint ខាង​លើ​ត្រូវការ​​នាំ​ចូល​ក្បួន​ខ្នាតនៅ​​ក្នុង​ឯសារ page.js ​​​​​​​នៅក្នុង​ថត src/models ​​​មកប្រើការ​នៅ​ក្នុង​ការ​លុប​ទិន្នន័យ​ដែល​ជា​ទំព័រ​ស្តាទិក ដូចនេះ​យើង​ចាំបាច់​ត្រូវ​បង្កើតក្បួន​ខ្នាត​ចាំបាច់​នៅ​ក្នុងឯកសារ​ page.js នេះ​ ក្នុង​គោល​បំណងផ្តល់​លទ្ធភាព​អោយ​ក្បួន​ចុង​ផ្លូវ​ឬ API Endpoint អាច​លុប​ទិន្នន័យ​នៃ​ទំព័រ​ស្តាទិកបាន​គ្រប់​ពេល​វេលា​។ មួយ​វិញ​ទៀត មុន​នឹង​លុប​ទិន្នន័យ​នៃ​ទំព័រ​ស្តាទិក​ណា​មួយ អ្នក​និពន្ធ​ចាំបាច់​ត្រូវ​ឆ្លង​កាត់​ការត្រួត​ពិនិត្យ​ពី​តួនាទីរបស់​ខ្លួន​។ មាន​តែ​អ្នក​និពន្ធ​មាន​តួនាទី​ជា Admin តែ​ប៉ុណ្ណោះ ទើប​មាន​សិទ្ធិ​អាច​លុប​ទំព័រ​ស្តាទិក​បាន​។</p><pre><code class="js javascript js-code">// src/models/page.js
import prisma from './prisma.js'

class Page{
    ...
    async deletePage(params){
        await prisma.page.delete({ where: {id: params.id } })
    }
    ...
}

export default new Page()</code></pre><pre><code class="js javascript js-code">// src/pages/admin/page/delete/[id].js
import pageDb from "../../../../models/page.js"

export async function GET({ params, redirect, session, cookies }){
    const user = await session.get('user')
    if(!user){return redirect('/login')}
    
        if(user.role === 'Admin'){
            await pageDb.deletePage(params)
            cookies.set('form', JSON.stringify({success:true, info:'លុប​បាន​ដោយ​ជោគជ័យ!'}), { path: '/' })
        }else{
            cookies.set('form', JSON.stringify({success:false, info:'អ្នក​គ្មាន​សិទ្ធិ​លុប​ទំព័រ​ស្តាទិក​ទេ!'}), { path: '/' })
        }
    
    return redirect('/admin/page')
}</code></pre><p>&nbsp;</p><p>Netlify: <a href="https://khmerweb-dynamic-blog.netlify.app/login">https://khmerweb-dynamic-blog.netlify.app/login</a></p><p>GitHub: <a href="https://github.com/khmerweb/dynamic-blog">https://github.com/khmerweb/dynamic-blog</a></p>