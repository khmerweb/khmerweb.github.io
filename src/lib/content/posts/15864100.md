---
id: '15864100'
title: 'កំណត់​ទំហំ TinyMCE'
categories: 'Node.js, Sveltekit'
thumb: ''
date: '2025-09-27T14:23:59'
bookTitle: 'Desktop App with Electron'
bookThumb: ''
bookChapter: 'Electron & SvelteKit'
videos: ''
---
<p>យើង​សង្កេត​ឃើញ​ថា ក្រោយ​ពី​ត្រូវ​បាន​បង្កើត​ឡើង កម្មវិធី TinyMCE មិន​អាច​បំពេញ​ផ្ទៃ​ក្រឡាដែល​ត្រូវ​បាន​កំណត់​សំរាប់វា​​បាន​ឡើយ​។ ជាលទ្ធផល យើង​ឃើញ​​ផ្នែក​ខាងក្រោម​របស់​វា មាន​នៅ​សល់ចន្លោះ​ប្រហោង​មាន​ទំហំ​ធំ​គ្រាន់បើ​។ កត្តា​នេះ​បណ្តាល​មក​ពី​កំពស់​របស់​វា​ខ្លី​ជាង​កំពស់​ដែល​យើង​បាន​កំណត់​សំរាប់​វា​ ដោយ​ហេតុ​ថា បើ​យើង​មិន​កំណត់​ប្រវែង​កំពស់​របស់​វា​នៅ​ក្នុង​ឯកសារ editor-config.ts ទេ វា​នឹង​កំណត់​យក​លេខ 400​ (400px) ជា​ប្រវែង​កំពស់​របស់​វា​។ ដើម្បី​ដោះ​ស្រាយ​បញ្ហា​នេះ យើង​អាចកំណត់​​កំពស់​នៃ​កម្មវិធី TinyMCE អោយ​បំពេញ​ផ្ទៃ​ editor ទាំងមូល​កុំ​អោយ​មាន​ចន្លោះ​ប្រហោង ដោយ​អនុលោម​ទៅ​តាម​កំពស់របស់​ផ្ទាំង​ window ​ធំ​ដែល​ត្រូវ​បាន​កំណត់​នៅ​ក្នុង​ឯកសារ main.ts ។ ធ្វើ​ដូចនេះ កំពស់​របស់​កម្មវិធី TinyMCE នឹង​រីករួម​់ទៅ​តាម​កំពស់​របស់ window ធំ​ ហើយ​វា​នឹង​បំពេញ​ផ្ទាំង editor កុំ​អោយ​មាន​ចន្លោះ​ប្រហោង​ទោះ​ជា​ window ធំ​រីក​រួម​យ៉ាង​ណា​ក៏ដោយ​។&nbsp;<br><br>យើង​ត្រូវ​ធ្វើការកត់សំគាល់​ថា បញ្ហា​មាន​តែ​ជាមួយ​នឹង​កំពស់​របស់​ TinyMCE ប៉ុណ្ណោះ ចំពោះ​ទទឹង​របស់​វា​វិញ​អាច​រីករួម (responsive) អាស្រ័យ​ទៅ​តាម​ទំហំ​របស់ window ធំ​។</p><p>&nbsp;</p><p>ដោយ​ហេតុថា មាន​តែ​ឯកសារ main.ts ប៉ុណ្នោះ​ដែល​អាច​បង្កើត​និង​ស្រង់​យក​ទិន្នន័យ​ស្តី​ពី window ធំ ហើយ​ដើម្បី​សុវត្តិភាព កម្មវិធី SvelteKit គួរតែ​ទាក់ទង​ជាមួយ​​នឹង​ឯកសារ main.ts តាម​រយៈ​ឯកសារ preload ដើម្បី​ស្រង់​យក​ទិន្នន័យ​ស្តី​ពី​ window ធំ និង​អ្វី​ៗ​ផ្សេង​ៗ​ទៀត​ទាក់ទង​នឹង​កញ្ចប់ Node.js និង Electron ។ ជារួម ឯកសារ preload មាន​នាទី​ជា​អ្នក​កណ្តាល​ក្នុង​ការភ្ជាប់​ទំនាក់ទំនង​រវាង​កម្មវិធី​ SvelteKit និង​ឯកសារ main.ts ។&nbsp;</p><p>&nbsp;</p><p>យ៉ាងណាម៉ិញ កូដ​នៅ​ក្នុងឯកសារ preload គួរ​តែ​ត្រូវ​សរសេរ​ឡើង​ជា​ភាសា JavaScript ដែល​ប្រើប្រាស់ require ក្នុង​ការនាំ​ចូល​សាស្ត្រា​ទាំងឡាយ (module) ពោល​គឺ​ជា​ភាសា JavaScript សំរាប់ CommonJS ។ ក្នុង​ករណី​នេះ​ ឈ្មោះ​​នៅ​ខាង​ចុង​របស់ឯកសារ preload ត្រូវ​តែ​ជា​ .cjs ទើប​វា​អាច​ដំណើរ​ការ​ជាមួយ​នឹង​កម្មវិធី SvelteKit និង Electron ដែល​ប្រើប្រាស់​ភាសា JavaScript បែប​ទំនើប​ហៅ​ថា ES6 ។ ទំនាក់ទំនាក់​រវាង​កម្មវិធី SvelteKit និង​ឯកសារ main.ts តាមរយៈ​ឯកសារ preload.cjs អាច​ត្រូវ​ធ្វើ​ឡើង​ដូច​ខាង​ក្រោម​នេះ៖</p><pre><code class="js javascript js-code">// electron/preload.cjs
const { contextBridge, ipcRenderer } = require('electron')

contextBridge.exposeInMainWorld('electronAPI', {
    getWindowHeight: () =&gt; ipcRenderer.invoke('get-window-height'),
	onUpdateWindowHeight: (callback) =&gt; ipcRenderer.on('update-window-height', callback),
})</code></pre><pre><code class="typescript">// electron/main.ts
...
ipcMain.handle('get-window-height', async (event) =&gt; {
    if(mainWindow){
        const [width, height] = mainWindow.getSize();
        return height
    }
})
...
function createWindow() {
    mainWindow = new BrowserWindow({
        width: 1150,
        height: 690,
        webPreferences: {
          preload: path.join(__dirname, 'preload.cjs'), 
          nodeIntegration: false, 
          contextIsolation: true, 
        },
    });
    ...
    mainWindow.on('resized', () =&gt; {
        if(mainWindow){
            const [width, height] = mainWindow.getSize();
            mainWindow.webContents.send('update-window-height', height)
        }
    });

    mainWindow.on('maximize', () =&gt; {
        if(mainWindow){
            const [width, height] = mainWindow.getSize();
            mainWindow.webContents.send('update-window-height', height)
        }
    });

    mainWindow.on('unmaximize', () =&gt; {
        if(mainWindow){
            const [width, height] = mainWindow.getSize();
            mainWindow.webContents.send('update-window-height', height)
        }
    });
    ...
 }
 ...</code></pre><pre><code class="typescript">// src/routes/editor-utils.ts
class EditorUtils{
    async getWindowHeight(){
        const height = await (window as any).electronAPI.getWindowHeight();
        if((window as any).tinymce){
            let tinyMCEInstance = (window as any).tinymce.get('myeditor');
            tinyMCEInstance.getContainer().style.height = `${height-247}px`;
        }
    };
    
    async updateWindowHeight(){
        await (window as any).electronAPI.onUpdateWindowHeight((_event: any, height: number) =&gt; {
            if ((window as any).tinymce) {
                let tinyMCEInstance = (window as any).tinymce.get('myeditor');
                tinyMCEInstance.getContainer().style.height = `${height-247}px`;
            }
        });
    };
}

export default new EditorUtils()</code></pre><pre><code class="svelte">&lt;!--src/routes/+page.svelte--&gt;
&lt;script lang="ts"&gt;
...
import editorUtils from "./editor-utils"
...
$effect(()=&gt;{
    editorUtils.updateWindowHeight()
});
&lt;/script&gt;
...
&lt;Editor
    id="myeditor"
    licenseKey="gpl"
    scriptSrc="./tinymce/tinymce.min.js" 
    bind:value={editorContent}
    conf={editorConfig}
    on:init={editorUtils.getWindowHeight}
/&gt;
...</code></pre><p>&nbsp;</p><figure class="image"><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjyZuRbmzdw4gR7vfCqPAdN98qwviz2fXv77GCosQxJgSYSeAmhIhOyPJgIVbDzHbzouco4HyrQyDFNPHkj_QdnBTLAGtEiBiDA6Cwq61ObY3ymcrRNrB1WOR8Ay8-MSWDkEhIwZuf1dKmbrLGDj9lFhGkTDnAb5qs6LcqqfrpSGrpY3IiSdWSCKOC8PuU/s1600/Capture.PNG"></figure>