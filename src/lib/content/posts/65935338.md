---
id: '65935338'
title: 'តំលើង​កញ្ចប់ SvelteKit & Electron'
categories: 'Node.js, Sveltekit'
thumb: ''
date: '2025-09-24T15:23:40'
bookTitle: 'Desktop App with Electron'
bookThumb: ''
bookChapter: 'Electron & SvelteKit'
videos: ''
---
<p>ក្នុង​គោលបំណង​អនុវត្ត​ទ្រឹស្តី​នៃ​ការបង្កើត​កម្មវិធី Desktop ដោយ​ប្រើប្រាស់​កញ្ចប់ Electron យើង​​​អាច​សាកល្បង​បង្កើត​កម្មវិធី​ដ៏​តូច​មួយ​សំរាប់​បង្កើត​ឯកសារ Markdown និង​ប្រើប្រាស់​កម្មវិធី TinyMCE ក្នុង​ការវាយ​អត្ថបទ​បង្កើត​ឯកសារ​ប្រភេទ​នេះ​។ លើស​ពី​នេះ​ទៀត យើង​ក៏​អាច​ប្រើប្រាស់​កញ្ចប់ SvelteKit ក្នុង​ការបង្កើត​រូបរាង​ (User Interface) ​នៃ​កម្មវិធី​របស់​យើង​បាន​ដែរ​។ អាស្រ័យ​ហេតុ​នេះ ដំបូង​បង្អស់ យើង​ចាំបាច់​​ត្រូវ​តំលើង​កញ្ចប់ SvelteKit ដោយ​សរសេរ​​នៅ​លើ​បង្អួច Terminal ថា​៖</p><pre><code>npx sv create md-editor</code></pre><p>&nbsp;</p><p>យើង​ត្រូវ​ជ្រើស​រើស​យក​ភាសា TypeScript ព្រម​ជាមួយ​នឹង​កញ្ចប់ Vitest និង Playwright សំរាប់សរសេរ​កម្មវិធី​និង​​ធ្វើការសាកល្បង​ទាំងឡាយ​។ បន្ទាប់​មក​ទៀត​ យើង​ត្រូវ​បើក​ VS Code ចូល​ទៅ​ក្នុ​ង​ថត md-editor និង​តំលើង​បន្ថែម​កញ្ចប់ adapter static មួយ​ទៀត​ទៅ​ក្នុង​កញ្ចប់ SvelteKit ព្រោះ​វា​នឹង​ជួយ​អោយកញ្ចប់ SvelteKit ​​អាច​​ដំណើរការ​ជាមួយ​នឹង​កញ្ចប់ Electron ដោយ​រលូន​ក្នុង​ការបង្កើត​រូបរាង​នៃ​កម្មវិធី​ដែល​អាច​ដំណើរការ​នៅ​ក្នុង​កំព្យូទ័រ​យូរ​ដៃ​។</p><pre><code>npm i -D @sveltejs/adapter-static</code></pre><p>&nbsp;</p><p>ការតំលើង​កញ្ចប់ adapter static នេះ ទាមទារ​អោយ​​យើង​ធ្វើការ​កែប្រែ​ឯកសារ svelte.config.js ដូច​ខាង​ក្រោម​នេះ​៖</p><pre><code class="js javascript js-code">import adapter from '@sveltejs/adapter-static';

/** @type {import('@sveltejs/kit').Config} */
const config = {
	kit: {
		adapter: adapter()
	}
};

export default config;​</code></pre><p>&nbsp;</p><p>ព្រម​ជាមួយ​នឹង​ការកែប្រែ​ឯកសារ​ខាងលើ​នេះ យើង​ត្រូវ​បង្កើត​ឯកសារ +layout.ts មួយ​ទៀតដាក់​ចូល​ទៅ​ក្នុង​ថត src/routes/ ។ នៅ​ក្នុង​ឯកសារ +layout.ts យើង​ត្រូវ​សរសេរ​កូដ​ដូច​ខាង​ក្រោម​៖</p><pre><code class="typescript">// src/routes/+layout.ts
export const prerender = true;
</code></pre><p>&nbsp;</p><p>ដំណាក់កាល​ទី​មួយ​​ត្រូវ​បាន​ចប់​សព្វគ្រប់​អស់​ហើយ នៅ​ដំណាក់​​ទី​ពីរ​ទៀត​ដែល​យើង​ត្រូវ​តំលើង​កញ្ចប់ Electron​ និង​កញ្ចប់​ចាំបាច់​មួយ​ចំនួន​ទៀត​នៅ​ក្នុង​ថត md-editor ដដែល​នេះ​។ ពោល​គឺ​យើង​ត្រូវ​សរសេរ​នៅ​លើ​បង្អួច Terminal ថា៖&nbsp;</p><pre><code>npm install --save-dev electron concurrently wait-on cross-env nodemon</code></pre><p>&nbsp;</p><p>បន្ទាប់​មក​ទៀត យើង​ត្រូវ​ធ្វើការកែតំរូវ​នៅ​ក្នុង​ឯកសារ package.json នៅ​ត្រង់​កន្លែង script ដូច​ខាងក្រោម​នេះ៖</p><pre><code>...
"scripts": {
    "dev": "concurrently -k \"vite\" \"wait-on tcp:5173 &amp;&amp; cross-env NODE_ENV=development nodemon --exec electron electron/main.ts\"",
    "build": "vite build",
    "preview": "vite preview",
    "prepare": "svelte-kit sync || echo ''",
    "check": "svelte-kit sync &amp;&amp; svelte-check --tsconfig ./tsconfig.json",
    "check:watch": "svelte-kit sync &amp;&amp; svelte-check --tsconfig ./tsconfig.json --watch",
    "test:unit": "vitest",
    "test": "npm run test:unit -- --run &amp;&amp; npm run test:e2e",
    "test:e2e": "playwright test",
    "build:electron": "tsc --project electron/tsconfig.electron.json",
    "make:electron": "npm run build &amp;&amp; npm run build:electron &amp;&amp; cross-env NODE_ENV=production electron dist-electron/main.js"
  },
  ...</code></pre><p>&nbsp;</p><p>ការកែប្រែ​ឯកសារ​​ដួច​ខាង​លើ​នេះ ទាមទារ​អោយ​យើង​បង្កើត​ថត electron មួយ​នៅ​ក្នុង​ថត​ដើម​នៃ​ថត md-editor ដែល​នៅ​ក្នុង​នោះ យើង​ត្រូវ​បង្កើត​ឯកសារ main.ts &nbsp;មួយ​ដែល​មាន​កូដ​ដូច​ខាង​ក្រោម​នេះ៖</p><pre><code class="typescript">// electron/main.ts
import { app, BrowserWindow } from 'electron';
import * as path from "path";
const __dirname = import.meta.dirname;

let mainWindow: BrowserWindow | null;

function createWindow() {
    mainWindow = new BrowserWindow({
        width: 800,
        height: 600,
        webPreferences: {
          preload: path.join(__dirname, 'preload.js'), 
          nodeIntegration: true, 
          contextIsolation: false, 
        },
    });

    if (process.env.NODE_ENV === 'development') {
        mainWindow.loadURL('http://localhost:5173'); 
    } else {
        mainWindow.loadFile(path.join(__dirname,'../build/index.html')); 
    }

    mainWindow.on('closed', () =&gt; {
        mainWindow = null;
    });
}

app.whenReady().then(createWindow);

app.on('window-all-closed', () =&gt; {
    if (process.platform !== 'darwin') {
        app.quit();
    }
});

app.on('activate', () =&gt; {
    if (mainWindow === null) {
        createWindow();
    }
});</code></pre><p>&nbsp;</p><p>ដោយ​កូដ​នៅ​ក្នុង​ឯកសារ main.ts ខាង​លើ​ជា​កូដ​ជា​ភាសា TypeScript ដូចនេះ​យើង​ចាំបាច់​ត្រូវ​បង្កើត​ឯកសារ tsconfig.electron.json មួយ​ទៀត​សំរាប់​បកប្រែ​ភាសា TypeScript អោយ​ទៅ​ជា​ភាសា JavaScript ។</p><pre><code class="js javascript js-code">{
    "compilerOptions": {
        "target": "es2020",
        "module": "nodenext",
        "strict": true,
        "esModuleInterop": true,
        "skipLibCheck": true,
        "forceConsistentCasingInFileNames": true,
        "outDir": "../dist-electron", 
        "rootDir": "./"
    },
    "include": ["./**/*.ts"]
}</code></pre><p>&nbsp;</p><p>លុះ​មាន​អ្វី​​ឺៗ​ទាំងអស់​នោះ​ហើយ យើង​អាច​សាកល្បង​ដំណើរ​កម្មវិធី​របស​់​យើង​ក្នុង​បរិបទ​កំពុង​អភិវឌ្ឍ​ ដោយ​សរសេរ​ដូច​ខាង​ក្រោម​នេះ៖</p><pre><code>npm run dev</code></pre><p>&nbsp;</p><figure class="image"><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjmeTB6KOcYcDPYH6ZtoTl_hEPGumLwRs1KNmVF2TVZu_UDIDl4clgYaFNQ8oKZTfrzZP8W1I7btng1mf-PL8tU2mXdMkKVtiYeqaeK653Ijpcg4fQdpVjjonSGFjAYmthNBUqcoX09KYV5mII-dc7msx0wICv_VTH1rM4waRyRPNjYjDTU_1Jf8arh33g/s1600/Capture.PNG"></figure><p>&nbsp;</p><p>បើ​យើង​ចង់​បង្កើត​លទ្ធផល​សំរេច​នៃ​កម្មវិធី​របស់​យើង យើង​ត្រូវ​សរសេរ​ថា៖</p><pre><code>npm run make:electron</code></pre><p>&nbsp;</p><figure class="image"><img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjmeTB6KOcYcDPYH6ZtoTl_hEPGumLwRs1KNmVF2TVZu_UDIDl4clgYaFNQ8oKZTfrzZP8W1I7btng1mf-PL8tU2mXdMkKVtiYeqaeK653Ijpcg4fQdpVjjonSGFjAYmthNBUqcoX09KYV5mII-dc7msx0wICv_VTH1rM4waRyRPNjYjDTU_1Jf8arh33g/s1600/Capture.PNG"></figure><p>&nbsp;</p><p>យើង​នឹង​ឃើញ​ថត​មួយ​មាន​ឈ្មោះ​ថា dist-electron ត្រូវ​បាន​បង្កើត​ឡើង ហើយ​នៅ​ក្នុង​នោះ​មាន​ឯកសារ​មួយ​មាន​ឈ្មោះ​ថា main.js ដែល​ជា​ឯកសារ​​ជា​ភាសា JavaScript បក​ប្រែ​​ពី​ភាសា TypeScript &nbsp;នៃ​​​​ឯកសារ main.ts &nbsp;នៅ​ក្នុង​ថត electron ។</p><pre><code class="js javascript js-code">// dist-electron/main.js
import { app, BrowserWindow } from 'electron';
import * as path from "path";
const __dirname = import.meta.dirname;
import squirrelStartup from 'electron-squirrel-startup';
if (squirrelStartup) {
    app.quit();
}
let mainWindow;
function createWindow() {
    mainWindow = new BrowserWindow({
        width: 800,
        height: 600,
        webPreferences: {
            preload: path.join(__dirname, 'preload.js'),
            nodeIntegration: true,
            contextIsolation: false,
        },
    });
    if (process.env.NODE_ENV === 'development') {
        mainWindow.loadURL('http://localhost:5173');
    }
    else {
        mainWindow.loadFile(path.join(__dirname, '../build/index.html'));
    }
    mainWindow.on('closed', () =&gt; {
        mainWindow = null;
    });
}
app.whenReady().then(createWindow);
app.on('window-all-closed', () =&gt; {
    if (process.platform !== 'darwin') {
        app.quit();
    }
});
app.on('activate', () =&gt; {
    if (mainWindow === null) {
        createWindow();
    }
});</code></pre>