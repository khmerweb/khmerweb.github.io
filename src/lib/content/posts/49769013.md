---
id: '49769013'
title: 'ក្បួន​មាន​ឈ្មោះ'
categories: 'Node.js, Sveltekit'
thumb: ''
date: '2025-08-20T11:49:37'
bookTitle: 'SvelteKit in Detail'
bookThumb: ''
bookChapter: 'អំពី​ទំរង់​បែបបទ'
videos: ''
---
<p>ក្នុង​ករណី​ទំព័រ​មួយ​មាន​ទំរង់​បែបបទ​លើស​ពី​មួយ យើង​ចាំបាច់​ត្រូវ​បង្កើត​ក្បួន​ដែល​ជា​ធាតុ​នៃ​សំណុំ​ទិន្នន័យ action មាន​ចំនួន​ស្មើ​នឹង​ទំរង់​បែបបទ​ទាំងនោះ​។ ហើយ​ក្បួន​និមួយ​ៗ​ត្រូវ​មាន​ឈ្មោះ​ខុស​ៗ​គ្នាឆ្លើយ​តប​ទៅ​នឹង​ទំរង់​បែបបទ​ទាំងនោះ​។ ពិនិត្យ​កម្មវិធី​ខាង​ក្រោម​នេះ៖</p><pre><code class="svelte">&lt;!--src/routes/+page.svelte--&gt;
&lt;script&gt;
    let { data } = $props();
&lt;/script&gt;

&lt;div class="centered"&gt;
    &lt;h1&gt;todos&lt;/h1&gt;

    &lt;form method="POST" action="?/create"&gt;
        &lt;label&gt;
            add a todo:
            &lt;input
                name="description"
                autocomplete="off"
            /&gt;
        &lt;/label&gt;
    &lt;/form&gt;

    &lt;ul class="todos"&gt;
        {#each data.todos as todo (todo.id)}
            &lt;li&gt;
                &lt;form method="POST" action="?/delete"&gt;
                    &lt;input type="hidden" name="id" value={todo.id} /&gt;
                    &lt;span&gt;{todo.description}&lt;/span&gt;
                    &lt;button aria-label="Mark as complete"&gt;&lt;/button&gt;
                &lt;/form&gt;
            &lt;/li&gt;
        {/each}
    &lt;/ul&gt;
&lt;/div&gt;

&lt;style&gt;
    .centered {
        max-width: 20em;
        margin: 0 auto;
    }

    label {
        width: 100%;
    }

    input {
        flex: 1;
    }

    span {
        flex: 1;
    }

    button {
        border: none;
        background: url(./remove.svg) no-repeat 50% 50%;
        background-size: 1rem 1rem;
        cursor: pointer;
        height: 100%;
        aspect-ratio: 1;
        opacity: 0.5;
        transition: opacity 0.2s;
    }

    button:hover {
        opacity: 1;
    }

&lt;/style&gt;</code></pre><pre><code class="js javascript js-code">// src/routes/+page.server.js
import * as db from '$lib/server/database.js'

export function load({ cookies }) {
	let id = cookies.get('userid')

	if (!id) {
		id = crypto.randomUUID()
		cookies.set('userid', id, { path: '/' })
	}

	return {
		todos: db.getTodos(id)
	}
}

export const actions = {
	create: async ({ cookies, request }) =&gt; {
		const data = await request.formData()
		db.createTodo(cookies.get('userid'), data.get('description'))
	},

	delete: async ({ cookies, request }) =&gt; {
		const data = await request.formData()
		db.deleteTodo(cookies.get('userid'), data.get('id'))
	}
}
</code></pre><pre><code class="js javascript js-code">// In a real app, this data would live in a database,
// rather than in memory. But for now, we cheat.
const db = new Map()

export function getTodos(userid) {
	if (!db.get(userid)) {
		db.set(userid, [{
			id: crypto.randomUUID(),
			description: 'Learn SvelteKit',
			done: false
		}])
	}

	return db.get(userid)
}

export function createTodo(userid, description) {
	const todos = db.get(userid)

	todos.push({
		id: crypto.randomUUID(),
		description,
		done: false
	});
}

export function deleteTodo(userid, todoid) {
	const todos = db.get(userid)
	const index = todos.findIndex((todo) =&gt; todo.id === todoid)

	if (index !== -1) {
		todos.splice(index, 1)
	}
}
</code></pre>