---
id: '50040587'
title: 'គំរូ​ទំព័រ​ផ្នែក​ក្រោម'
categories: 'Node.js, Astro'
thumb: ''
date: '2025-08-29T16:48:43'
bookTitle: 'Astro Dynamic Website'
bookThumb: ''
bookChapter: 'ទំព័រ​គ្រប់គ្រង'
videos: ''
---
<p>ផ្នែក​ខាង​ក្រោម​នៃ​ទំព័រ​គ្រប់គ្រង ជា​ផ្នែក​ដែល​បង្ហាញ​​ទិន្នន័យ​នៃ​ការផ្សាយ (post) ​ឬ​ទិន្នន័យ​ផ្សេង​ៗ​ទៀត​ទាក់ទង​នឹង​ទំព័រណា​មួយ។ ដោយ​ហេតុ​ថា ទំព័រ​គ្រប់គ្រង​នឹង​ត្រូវ​យក​ទៅ​ប្រើ​ជា​គំរូ​ទំព័រ​គ្រឹះ​សំរាប់​ទំព័រ​ដទៃ​ទៀត ដូចនេះ​ទិន្នន័យ​ត្រូវ​បង្ហាញ​នៅ​​​ផ្នែក​ខាង​ក្រោ​ម​នៃ​ទំព័រ​គ្រប់គ្រង នឹង​ត្រូវ​ប្រែប្រួល​ទៅ​តាម​ប្រភេទ​នៃ​ទំព័រ​និមួយ​ៗ​។</p><pre><code class="svelte">&lt;!--src/components/admin/Item.svelte--&gt;
&lt;script&gt;
    let {data} = $props()
	let items = $state(data?.items)
	let value = $state(undefined)
	let navPage = data?.navPage || 1
	
	async function paginate(e){
		const response = await fetch(`/admin/${data.type}/paginate/${e.target.value}`)
		items = await response.json()
	}
&lt;/script&gt;

&lt;footer&gt;
	{#if data?.form}
	&lt;div class="{data.form.success ? 'success':'error'}"&gt;{ data.form.info }&lt;/div&gt;
	{/if}
    &lt;div class="info"&gt;{data?.info}​ទាំងអស់​មានចំនួនៈ {data?.count}&lt;/div&gt;
    &lt;div class="items"&gt;
        {#each items as item}
        &lt;div class="item"&gt;
            &lt;a class="thumb" href="/{data.type}/{item.id}"&gt;
                &lt;img src={item.thumb} alt='' /&gt;
                {#if item.videos?.length}
                &lt;img class="play" src="/images/play.png" alt='' /&gt;
                {/if}
            &lt;/a&gt;
            &lt;div class="title"&gt;
                &lt;a href="/{data.type}/{item.id}"&gt;{item.title}&lt;/a&gt;
                &lt;div&gt;{new Date(item.date).toLocaleDateString('it-IT')}&lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="edit"&gt;
				&lt;a href="/admin/{data.type}/delete/{item.id}"&gt;
					&lt;img src="/images/delete.png" alt=''/&gt;
				&lt;/a&gt;
                &lt;a style="padding-right:5px;" href={`/admin/${data.type}/edit/${item.id}?p=${value}`}&gt;
					&lt;img src="/images/edit.png" alt='' /&gt;
				&lt;/a&gt;
            &lt;/div&gt; 
        &lt;/div&gt;
        {/each}
    &lt;/div&gt;
	&lt;div class="pagination"&gt;
		&lt;span&gt;​​​​​​​​​​​​​​​​​​​​​ទំព័រ &lt;/span&gt;
			&lt;select bind:value onchange={paginate}&gt; 
				{#each [...Array(data?.pageNumber).keys()] as page}
					{#if page+1 == parseInt(navPage)}
					&lt;option selected&gt;{page+1}&lt;/option&gt;
					{:else}
					&lt;option&gt;{page+1}&lt;/option&gt;
					{/if}
				{/each}
			&lt;/select&gt; 
            
        &lt;span&gt;នៃ {data?.pageNumber}&lt;/span&gt;
	&lt;/div&gt;
&lt;/footer&gt;

&lt;style&gt;
    footer{
		margin-top: 0;
	}
	footer .success, footer .error{
		background-color: green;
		text-align: center;
		margin-top: 10px;
		padding: 5px;
		color: white;
	}
	footer .error{
		background-color: red;
	}
	footer .info{
		background-color: var(--background);
		text-align: center;
		margin-top: 10px;
		padding: 5px;
	}
	footer .items{
		display: grid;
		grid-template-columns: calc(50% - 5px ) calc(50% - 5px );
		grid-gap: 10px;
		margin-top: 10px;
	}
	footer .items .item{
		background-color: var(--background);
		display: grid;
		grid-template-columns: 130px auto;
		grid-gap: 10px;
		align-items: center;
		padding-right: 10px;
	}
	footer .items .item:hover{
		grid-template-columns: 130px auto 75px;
	}
	footer .items .item .thumb{
		position: relative;
		padding-top: 56.25%;
		overflow: hidden;
	}
	footer .items .item .thumb img{
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		min-height: 100%;
		float: left;
	}
	footer .items .item .thumb .play{
		width: 25%;
		top: 50%;
    	left: 50%;
		min-height: auto;
		transform: translate(-50%,-50%);
	}
	footer .items .item .title{
		white-space: nowrap;
        overflow: hidden;
    	text-overflow: ellipsis;
		
	}
	footer .items .item .edit{
    	text-align: right;
		display: none;
	}
	footer .items .item .edit a{
    	float: right;
	}
	footer .items .item .edit img{
		width: 30px;
	}
	footer .items .item .edit img:hover{
		cursor: pointer;
		opacity: .7;
	}
	footer .items .item:hover .edit{
    	display: block;
		grid-template-columns: auto auto;
	}
	footer .pagination{
		text-align: center;
		margin-top: 20px;
	}

    @media only screen and (max-width: 600px){
        footer .items{
            grid-template-columns: 100%;
        }
        footer .items .item .edit img{
		    width: 35px;
	    }
    }
&lt;/style&gt;</code></pre><pre><code class="js javascript js-code">&lt;!--src/components/admin/Layout.astro--&gt;
---
// @ts-nocheck
import Base from "../Base.astro"
import Header from "./Header.svelte"
import Footer from "../Footer.svelte"
import Admin from "../../components/admin/Admin.astro"
import Item from "../../components/admin/Item.svelte"
const { title, items, user } = Astro.props
const data = { items }
---

&lt;Base pageTitle={title}&gt;
    &lt;Header siteTitle={title} {user} client:load /&gt;
    &lt;Admin&gt;
        &lt;slot name="editor" slot="editor" /&gt;
        &lt;Item slot="item" {data} /&gt;
    &lt;/Admin&gt;
    &lt;Footer /&gt;
&lt;/Base&gt;

&lt;style is:global&gt;
    :root{
        --background-dark: grey;
        --background: lightgrey;
        --background-light: rgb(233, 232, 232);
        --body: white;
        --panel: lightgrey;
        --body-font: 14px/1.5 Vidaloka, OdorMeanChey;
        --link: rgb(71, 71, 71);
        --menu: rgb(177, 177, 177);
        --playlist-part:rgb(175, 175, 175);
        --playlist-color: black;
        --playlist-clicked: white;
        --playlist-clicked-bg: #149165;
        --color: rgb(71, 71, 71);
    }
  
    *{
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    a{
        text-decoration: none;
        color: var(--link);
    }

    a:hover{
        opacity: .7;
    }

    .region{
        max-width: 1150px;
        margin: 0 auto;
    }
  
    html{
        color: var(--color);
        font: var(--body-font);
        background: var(--background-light);
    }
&lt;/style&gt;</code></pre><pre><code class="js javascript js-code">&lt;!--src/pages/admin/index.astro--&gt;
---
// @ts-nocheck
const user = await Astro.session?.get('user')
if(!user){return Astro.redirect('/login')}

import Layout from "../../components/admin/Layout.astro"
const items = []
---

&lt;Layout title="ទំព័រគ្រប់គ្រង" user={user} items={items} /&gt;</code></pre><p>&nbsp;</p><p>Netlify: <a href="https://khmerweb-dynamic-blog.netlify.app/login">https://khmerweb-dynamic-blog.netlify.app/login</a></p><p>GitHub: <a href="https://github.com/khmerweb/dynamic-blog">https://github.com/khmerweb/dynamic-blog</a></p>