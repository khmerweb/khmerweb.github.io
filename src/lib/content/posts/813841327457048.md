---
id: '813841327457048'
title: 'បង្កើត​តារាង​ទិន្នន័យ'
categories: 'Node.js, Sveltekit'
thumb: ''
date: '2025-10-05T14:43:12'
bookTitle: 'Desktop App with Electron'
bookCover: ''
bookChapter: 'Electron & SvelteKit & SQLite'
videos: ''
---
<p>តារាង​ទិន្នន័យ​ត្រូវ​បង្កើត​ឡើង​នៅ​ក្នុង​ឯកសារ main.ts ព្រោះ​មាន​តែ​ឯកសារ​នេះទេ ដែល​មាន​សិទ្ធិ​អាច​ប្រើប្រាស់ក្បួន​ខ្នាត​ទាក់ទង​នឹង​មូលដ្ឋាន​ទិន្នន័យ SQLite ។ ក៏ប៉ុន្តែ យើង​អាច​សរសេរកូដ​បង្កើត​តារាង​ទិន្នន័យ​នៅ​ក្នុង​ឯកសារ​មួយ​ដាច់​ដោយឡែក រួច​សឹម​នាំចូល​យក​មក​ប្រើប្រាស់​នៅ​ក្នុងឯកសារ main.ts ជា​ក្រោយ​។</p>
<pre class="language-typescript"><code>// electron/db-utils.ts
import Database from 'better-sqlite3';
import ShortUniqueId from 'short-unique-id';
const { randomUUID } = new ShortUniqueId({ length: 15, dictionary: 'number' });
import Store from 'electron-store';
interface FolderPath {
    dbFolderPath: string | null;
}
const store = new Store&lt;FolderPath&gt;();

class DBTools{
    db: any;

    async init(app:any, dialog: any){
        let dbFolderPath = store.get('dbFolderPath') || app.getPath('home');
        if(dbFolderPath?.length){
            this.db = new Database(`${dbFolderPath}/database.sqlite`);
            this.db.exec(`
                CREATE TABLE IF NOT EXISTS Post (
                    id TEXT PRIMARY KEY,
                    title TEXT NOT NULL,
                    content TEXT,
                    categories TEXT NOT NULL,
                    thumb TEXT,
                    date TEXT NOT NULL,
                    bookTitle TEXT,
                    bookCover TEXT,
                    bookChapter TEXT,
                    videos TEXT,
                    updated_at TEXT DEFAULT CURRENT_TIMESTAMP
                );

                CREATE TRIGGER IF NOT EXISTS update_timestamp_trigger
                AFTER UPDATE ON Post
                FOR EACH ROW
                BEGIN
                    UPDATE Post
                    SET updated_at = CURRENT_TIMESTAMP
                    WHERE id = NEW.id;
                END;
            `);
        }
    }

}

export default new DBTools()</code></pre>
<pre class="language-typescript"><code>// electron/main.ts
...
import db from "./db-utils.ts";
db.init(app, dialog);
...</code></pre>